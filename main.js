(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var n;t.g.importScripts&&(n=t.g.location+"");var e=t.g.document;if(!n&&e&&(e.currentScript&&(n=e.currentScript.src),!n)){var i=e.getElementsByTagName("script");if(i.length)for(var o=i.length-1;o>-1&&!n;)n=i[o--].src}if(!n)throw new Error("Automatic publicPath is not supported in this browser");n=n.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=n})(),(()=>{function t(t,n,e,i){const o=t.createBuffer();return t.bindBuffer(e,o),t.bufferData(e,n,i),o}function n(t,n,e){t.enableVertexAttribArray(n),t.vertexAttribPointer(n,e.size,e.type,e.normalize,e.stride,e.offset)}function e(t,n,e,i,o){const r=document.createElement("div"),a=document.createElement("label");a.textContent=n,a.setAttribute("for",n);const u=document.createElement("input");switch(u.type=e,u.id=n,u.name=n,t.appendChild(r),r.appendChild(a),r.appendChild(u),e){case"range":u.min=i.min,u.max=i.max,u.step=i.step,u.value=i.init;const t=document.createElement("span");t.textContent=u.value,u.addEventListener("input",(function(){let n=parseFloat(u.value);o(n),t.textContent=n})),r.appendChild(t);break;case"checkbox":u.checked=i.init,u.addEventListener("change",(function(){o(u.checked)}));break;default:throw new Error(`Unrecognized control type ${e}`)}return r}var i=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function r(){var t=new o(16);return o!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function u(t,n,e){var i,o,r,a,u,c,l,f,s,m,p,v,h=e[0],_=e[1],g=e[2];return n===t?(t[12]=n[0]*h+n[4]*_+n[8]*g+n[12],t[13]=n[1]*h+n[5]*_+n[9]*g+n[13],t[14]=n[2]*h+n[6]*_+n[10]*g+n[14],t[15]=n[3]*h+n[7]*_+n[11]*g+n[15]):(i=n[0],o=n[1],r=n[2],a=n[3],u=n[4],c=n[5],l=n[6],f=n[7],s=n[8],m=n[9],p=n[10],v=n[11],t[0]=i,t[1]=o,t[2]=r,t[3]=a,t[4]=u,t[5]=c,t[6]=l,t[7]=f,t[8]=s,t[9]=m,t[10]=p,t[11]=v,t[12]=i*h+u*_+s*g+n[12],t[13]=o*h+c*_+m*g+n[13],t[14]=r*h+l*_+p*g+n[14],t[15]=a*h+f*_+v*g+n[15]),t}function c(t,n,e,o){var r,a,u,c,l,f,s,m,p,v,h,_,g,d,w,x,A,y,E,b,C,T,L,M,P=o[0],F=o[1],R=o[2],S=Math.hypot(P,F,R);return S<i?null:(P*=S=1/S,F*=S,R*=S,r=Math.sin(e),u=1-(a=Math.cos(e)),c=n[0],l=n[1],f=n[2],s=n[3],m=n[4],p=n[5],v=n[6],h=n[7],_=n[8],g=n[9],d=n[10],w=n[11],x=P*P*u+a,A=F*P*u+R*r,y=R*P*u-F*r,E=P*F*u-R*r,b=F*F*u+a,C=R*F*u+P*r,T=P*R*u+F*r,L=F*R*u-P*r,M=R*R*u+a,t[0]=c*x+m*A+_*y,t[1]=l*x+p*A+g*y,t[2]=f*x+v*A+d*y,t[3]=s*x+h*A+w*y,t[4]=c*E+m*b+_*C,t[5]=l*E+p*b+g*C,t[6]=f*E+v*b+d*C,t[7]=s*E+h*b+w*C,t[8]=c*T+m*L+_*M,t[9]=l*T+p*L+g*M,t[10]=f*T+v*L+d*M,t[11]=s*T+h*L+w*M,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var l=function(t,n,e,i,o){var r,a=1/Math.tan(n/2);return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(r=1/(i-o),t[10]=(o+i)*r,t[14]=2*o*i*r):(t[10]=-1,t[14]=-2*i),t};function f(t,n,e,o){var r,u,c,l,f,s,m,p,v,h,_=n[0],g=n[1],d=n[2],w=o[0],x=o[1],A=o[2],y=e[0],E=e[1],b=e[2];return Math.abs(_-y)<i&&Math.abs(g-E)<i&&Math.abs(d-b)<i?a(t):(m=_-y,p=g-E,v=d-b,r=x*(v*=h=1/Math.hypot(m,p,v))-A*(p*=h),u=A*(m*=h)-w*v,c=w*p-x*m,(h=Math.hypot(r,u,c))?(r*=h=1/h,u*=h,c*=h):(r=0,u=0,c=0),l=p*c-v*u,f=v*r-m*c,s=m*u-p*r,(h=Math.hypot(l,f,s))?(l*=h=1/h,f*=h,s*=h):(l=0,f=0,s=0),t[0]=r,t[1]=l,t[2]=m,t[3]=0,t[4]=u,t[5]=f,t[6]=p,t[7]=0,t[8]=c,t[9]=s,t[10]=v,t[11]=0,t[12]=-(r*_+u*g+c*d),t[13]=-(l*_+f*g+s*d),t[14]=-(m*_+p*g+v*d),t[15]=1,t)}const s=document.getElementById("canvas"),m=s.getContext("webgl2");if(!m)throw new Error("WebGL2 not supported");const p=function(t,n,e){function i(n,e){const i=t.createShader(e);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(i);throw new Error(`Could not compile shader: ${n} \n\n${e}`)}return i}const o=i(n,t.VERTEX_SHADER),r=i(e,t.FRAGMENT_SHADER),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,r),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS)){const n=t.getProgramInfoLog(a);throw new Error(`Could not link shader program. \n\n${n}`)}return a}(m,"#version 300 es\n\tin vec4 a_position;\n\tin vec3 a_color;\n\tin mat4 a_modelMatrix;\n\t\n\tuniform mat4 u_view;\n\tuniform mat4 u_projection;\n\tuniform vec3 u_lightPosition;\n\tuniform vec3 u_viewPosition;\n\n\tout vec3 v_normal;\n\tout vec3 v_color;\n\tout vec3 v_surfaceToLight;\n\tout vec3 v_surfaceToView;\n\n\tvoid main() {\n\t\tvec4 worldPosition = a_modelMatrix * a_position;\n\t\tgl_Position = u_projection * u_view * worldPosition;\n\t\tv_normal = mat3(a_modelMatrix) * a_position.xyz;\n\t\tv_color = a_color;\n\t\tv_surfaceToLight = u_lightPosition - worldPosition.xyz;\n\t\tv_surfaceToView = u_viewPosition - worldPosition.xyz;\n\t}\n","#version 300 es\n\tprecision highp float;\n\t\n\tin vec3 v_normal;\n\tin vec3 v_color;\n\tin vec3 v_surfaceToLight;\n\tin vec3 v_surfaceToView;\n\t\n\tuniform vec3 u_lightColor;\n\tuniform vec3 u_ambientLight;\n\tuniform float u_specular_power;\n\tuniform vec3 u_specularColor;\n\n\tout vec4 outColor;\n\n\tvoid main() {\n\t\tvec3 normal = normalize(v_normal);\n\t\tvec3 surfaceToLightDirection = normalize(v_surfaceToLight);\n\t\tvec3 lightIntensity = \n\t\t\t\n\t\t\t// Diffuse lighting\n\t\t\tu_lightColor * v_color * max(dot(normal, surfaceToLightDirection), 0.0) \n\t\t\t\n\t\t\t// Specular lighting\n\t\t\t+ u_specularColor * pow(\n\t\t\t\tmax(\n\t\t\t\t\tdot(\n\t\t\t\t\t\treflect(-surfaceToLightDirection, normal),\n\t\t\t\t\t\tnormalize(v_surfaceToView)\n\t\t\t\t\t),\n\t\t\t\t\t0.0\n\t\t\t\t),\n\t\t\t\tu_specular_power\n\t\t\t);\n\n\t\toutColor = vec4(lightIntensity + u_ambientLight * v_color, 1.0);\n\t}\n"),v=function(t,n,e){const i={};for(let o=0;o<e.length;o++)if(i[e[o]]=t.getAttribLocation(n,e[o]),-1===i[e[o]])throw new Error(`Could not get attribute location for ${e[o]}`);return i}(m,p,["a_position","a_color","a_modelMatrix"]),h=function(t,n,e){const i={};for(let o=0;o<e.length;o++)if(i[e[o]]=t.getUniformLocation(n,e[o]),-1===i[e[o]])throw new Error(`Could not get uniform location for ${e[o]}`);return i}(m,p,["u_view","u_projection","u_lightPosition","u_lightColor","u_viewPosition","u_ambientLight","u_specular_power","u_specularColor"]),_=m.createVertexArray();m.bindVertexArray(_),t(m,new Float32Array([-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1]),m.ARRAY_BUFFER,m.STATIC_DRAW),n(m,v.a_position,{size:3,type:m.FLOAT,normalize:!1,stride:0,offset:0}),t(m,new Uint16Array([0,1,2,2,3,0,1,5,6,6,2,1,5,4,7,7,6,5,4,0,3,3,7,4,3,2,6,6,7,3,4,5,1,1,0,4]),m.ELEMENT_ARRAY_BUFFER,m.STATIC_DRAW);const g=new Float32Array(96),d=[];for(let t=0;t<6;++t){const n=16*t*4,e=16;d.push(new Float32Array(g.buffer,n,e))}const w=t(m,g,m.ARRAY_BUFFER,m.DYNAMIC_DRAW);for(let t=0;t<6;t++){const n=v.a_modelMatrix+t;m.enableVertexAttribArray(n);const e=16*t;m.vertexAttribPointer(n,4,m.FLOAT,!1,64,e),m.vertexAttribDivisor(n,1)}t(m,new Float32Array([1,0,0,0,1,0,0,0,1,1,1,0,0,1,1,1,0,1]),m.ARRAY_BUFFER,m.STATIC_DRAW),n(m,v.a_color,{size:3,type:m.FLOAT,normalize:!1,stride:0,offset:0}),m.vertexAttribDivisor(v.a_color,1),window.addEventListener("resize",(function(){s.width=window.innerWidth,s.height=window.innerHeight,m.viewport(0,0,s.width,s.height)}));const x=document.getElementById("toggleOverlay"),A=document.getElementById("overlay"),y=document.getElementById("controls"),E=document.getElementById("toggleControls");var b,C;b=y,C="flex",E.addEventListener("click",(function(){"none"===b.style.display?b.style.display=C:b.style.display="none"})),x.addEventListener("click",(function(){"flex"===A.style.display?(A.style.display="none",x.textContent="<<",E.style.display="block"):(A.style.display="flex",x.textContent=">>",E.style.display="none")}));var T=0,L=.001,M=2*Math.PI,P=[.1,.1,.1],F=[0,0,6],R=[1,1,1],S=32,I=[1,1,1],B=[0,0,6],D=[0,0,0],U=f(r(),B,D,[0,1,0]),z=50*Math.PI/180,k=s.width/s.height,V=.1,j=10,W=l(r(),z,k,V,j);e(y,"Tick rate","range",{min:0,max:.01,step:1e-4,init:L},(function(t){L=t})),e(y,"View X","range",{min:-10,max:10,step:.1,init:0},(function(t){B[0]=t,m.uniform3fv(h.u_viewPosition,B),U=f(r(),B,D,[0,1,0]),m.uniformMatrix4fv(h.u_view,!1,U)})),e(y,"View Y","range",{min:-10,max:10,step:.1,init:0},(function(t){B[1]=t,m.uniform3fv(h.u_viewPosition,B),U=f(r(),B,D,[0,1,0]),m.uniformMatrix4fv(h.u_view,!1,U)})),e(y,"View Z","range",{min:-10,max:10,step:.1,init:6},(function(t){B[2]=t,m.uniform3fv(h.u_viewPosition,B),U=f(r(),B,D,[0,1,0]),m.uniformMatrix4fv(h.u_view,!1,U)})),e(y,"Target X","range",{min:-10,max:10,step:.1,init:0},(function(t){D[0]=t,U=f(r(),B,D,[0,1,0]),m.uniformMatrix4fv(h.u_view,!1,U)})),e(y,"Target Y","range",{min:-10,max:10,step:.1,init:0},(function(t){D[1]=t,U=f(r(),B,D,[0,1,0]),m.uniformMatrix4fv(h.u_view,!1,U)})),e(y,"Target Z","range",{min:-10,max:10,step:.1,init:0},(function(t){D[2]=t,U=f(r(),B,D,[0,1,0]),m.uniformMatrix4fv(h.u_view,!1,U)})),e(y,"FOV","range",{min:0,max:180,step:1,init:50},(function(t){z=t*Math.PI/180,W=l(r(),z,k,V,j),m.uniformMatrix4fv(h.u_projection,!1,W)})),e(y,"Aspect","range",{min:0,max:10,step:.1,init:k},(function(t){k=t,W=l(r(),z,k,V,j),m.uniformMatrix4fv(h.u_projection,!1,W)})),e(y,"Near plane","range",{min:.1,max:10,step:.1,init:.1},(function(t){V=t,W=l(r(),z,k,V,j),m.uniformMatrix4fv(h.u_projection,!1,W)})),e(y,"Far plane","range",{min:.2,max:20,step:.1,init:10},(function(t){j=t,W=l(r(),z,k,V,j),m.uniformMatrix4fv(h.u_projection,!1,W)})),e(y,"Light X","range",{min:-10,max:10,step:.1,init:0},(function(t){F[0]=t,m.uniform3fv(h.u_lightPosition,F)})),e(y,"Light Y","range",{min:-10,max:10,step:.1,init:0},(function(t){F[1]=t,m.uniform3fv(h.u_lightPosition,F)})),e(y,"Light Z","range",{min:-10,max:10,step:.1,init:6},(function(t){F[2]=t,m.uniform3fv(h.u_lightPosition,F)})),e(y,"Light R","range",{min:0,max:1,step:.01,init:1},(function(t){R[0]=t,m.uniform3fv(h.u_lightColor,R)})),e(y,"Light G","range",{min:0,max:1,step:.01,init:1},(function(t){R[1]=t,m.uniform3fv(h.u_lightColor,R)})),e(y,"Light B","range",{min:0,max:1,step:.01,init:1},(function(t){R[2]=t,m.uniform3fv(h.u_lightColor,R)})),e(y,"Ambient R","range",{min:0,max:1,step:.01,init:.1},(function(t){P[0]=t,m.uniform3fv(h.u_ambientLight,P)})),e(y,"Ambient G","range",{min:0,max:1,step:.01,init:.1},(function(t){P[1]=t,m.uniform3fv(h.u_ambientLight,P)})),e(y,"Ambient B","range",{min:0,max:1,step:.01,init:.1},(function(t){P[2]=t,m.uniform3fv(h.u_ambientLight,P)})),e(y,"Specular power","range",{min:0,max:128,step:1,init:32},(function(t){S=t,m.uniform1f(h.u_specular_power,S)})),e(y,"Specular R","range",{min:0,max:1,step:.01,init:1},(function(t){I[0]=t,m.uniform3fv(h.u_specularColor,I)})),e(y,"Specular G","range",{min:0,max:1,step:.01,init:1},(function(t){I[1]=t,m.uniform3fv(h.u_specularColor,I)})),e(y,"Specular B","range",{min:0,max:1,step:.01,init:1},(function(t){I[2]=t,m.uniform3fv(h.u_specularColor,I)})),e(y,"Depth Test","checkbox",{init:!0},(function(t){t?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST)})),e(y,"Cull Face","checkbox",{init:!0},(function(t){t?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE)})),e(y,"Cull CW","checkbox",{init:!0},(function(t){t?m.frontFace(m.CW):m.frontFace(m.CCW)})),m.useProgram(p),m.enable(m.DEPTH_TEST),m.enable(m.CULL_FACE),m.frontFace(m.CW),m.uniformMatrix4fv(h.u_view,!1,U),m.uniform3fv(h.u_lightPosition,F),m.uniform3fv(h.u_lightColor,R),m.uniform3fv(h.u_viewPosition,B),m.uniform3fv(h.u_ambientLight,P),m.uniform1f(h.u_specular_power,S),m.uniform3fv(h.u_specularColor,I),m.uniformMatrix4fv(h.u_projection,!1,W),window.dispatchEvent(new Event("resize")),function t(){m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT),T=(T+L)%M;for(let t=0;t<3;t++)a(d[t]),u(d[t],d[t],[4*t-4,1.5,0]),c(d[t],d[t],Math.sin(T*(t+1))*Math.PI*2,[1,-.5,-1]);for(let t=3;t<6;t++)a(d[t]),u(d[t],d[t],[t%3*4-4,-1.5,0]),c(d[t],d[t],Math.sin(T*t)*Math.PI*-2,[1,-.5,-1]);m.bindBuffer(m.ARRAY_BUFFER,w),m.bufferSubData(m.ARRAY_BUFFER,0,g),m.drawElementsInstanced(m.TRIANGLES,36,m.UNSIGNED_SHORT,0,6),requestAnimationFrame(t)}()})(),t.p,t.p,t.p,t.p,t.p,t.p})();