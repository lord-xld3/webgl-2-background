(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var n;t.g.importScripts&&(n=t.g.location+"");var e=t.g.document;if(!n&&e&&(e.currentScript&&(n=e.currentScript.src),!n)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&!n;)n=i[r--].src}if(!n)throw new Error("Automatic publicPath is not supported in this browser");n=n.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=n})(),(()=>{function t(t,n,e,i){const r=t.createBuffer();return t.bindBuffer(e,r),t.bufferData(e,n,i),r}function n(t,n,e){t.enableVertexAttribArray(n),t.vertexAttribPointer(n,e.size,e.type,e.normalize,e.stride,e.offset)}function e(t,n,e,i,r){const o=document.createElement("div"),a=document.createElement("label");a.textContent=n,a.setAttribute("for",n);const u=document.createElement("input");switch(u.type=e,u.id=n,u.name=n,t.appendChild(o),o.appendChild(a),o.appendChild(u),e){case"range":u.min=i.min,u.max=i.max,u.step=i.step,u.value=i.init;const t=document.createElement("span");t.textContent=u.value,u.addEventListener("input",(function(){let n=parseFloat(u.value);r(n),t.textContent=n})),o.appendChild(t);break;case"checkbox":u.checked=i.init,u.addEventListener("change",(function(){r(u.checked)}));break;default:throw new Error(`Unrecognized control type ${e}`)}return o}var i=1e-6,r="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function o(){var t=new r(16);return r!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function u(t,n,e){var i,r,o,a,u,l,c,s,m,f,p,v,h=e[0],_=e[1],g=e[2];return n===t?(t[12]=n[0]*h+n[4]*_+n[8]*g+n[12],t[13]=n[1]*h+n[5]*_+n[9]*g+n[13],t[14]=n[2]*h+n[6]*_+n[10]*g+n[14],t[15]=n[3]*h+n[7]*_+n[11]*g+n[15]):(i=n[0],r=n[1],o=n[2],a=n[3],u=n[4],l=n[5],c=n[6],s=n[7],m=n[8],f=n[9],p=n[10],v=n[11],t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=u,t[5]=l,t[6]=c,t[7]=s,t[8]=m,t[9]=f,t[10]=p,t[11]=v,t[12]=i*h+u*_+m*g+n[12],t[13]=r*h+l*_+f*g+n[13],t[14]=o*h+c*_+p*g+n[14],t[15]=a*h+s*_+v*g+n[15]),t}function l(t,n,e,r){var o,a,u,l,c,s,m,f,p,v,h,_,g,d,w,x,y,A,E,b,C,T,L,M,F=r[0],P=r[1],R=r[2],S=Math.hypot(F,P,R);return S<i?null:(F*=S=1/S,P*=S,R*=S,o=Math.sin(e),u=1-(a=Math.cos(e)),l=n[0],c=n[1],s=n[2],m=n[3],f=n[4],p=n[5],v=n[6],h=n[7],_=n[8],g=n[9],d=n[10],w=n[11],x=F*F*u+a,y=P*F*u+R*o,A=R*F*u-P*o,E=F*P*u-R*o,b=P*P*u+a,C=R*P*u+F*o,T=F*R*u+P*o,L=P*R*u-F*o,M=R*R*u+a,t[0]=l*x+f*y+_*A,t[1]=c*x+p*y+g*A,t[2]=s*x+v*y+d*A,t[3]=m*x+h*y+w*A,t[4]=l*E+f*b+_*C,t[5]=c*E+p*b+g*C,t[6]=s*E+v*b+d*C,t[7]=m*E+h*b+w*C,t[8]=l*T+f*L+_*M,t[9]=c*T+p*L+g*M,t[10]=s*T+v*L+d*M,t[11]=m*T+h*L+w*M,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var c=function(t,n,e,i,r){var o,a=1/Math.tan(n/2);return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(i-r),t[10]=(r+i)*o,t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t};function s(t,n,e,r){var o,u,l,c,s,m,f,p,v,h,_=n[0],g=n[1],d=n[2],w=r[0],x=r[1],y=r[2],A=e[0],E=e[1],b=e[2];return Math.abs(_-A)<i&&Math.abs(g-E)<i&&Math.abs(d-b)<i?a(t):(f=_-A,p=g-E,v=d-b,o=x*(v*=h=1/Math.hypot(f,p,v))-y*(p*=h),u=y*(f*=h)-w*v,l=w*p-x*f,(h=Math.hypot(o,u,l))?(o*=h=1/h,u*=h,l*=h):(o=0,u=0,l=0),c=p*l-v*u,s=v*o-f*l,m=f*u-p*o,(h=Math.hypot(c,s,m))?(c*=h=1/h,s*=h,m*=h):(c=0,s=0,m=0),t[0]=o,t[1]=c,t[2]=f,t[3]=0,t[4]=u,t[5]=s,t[6]=p,t[7]=0,t[8]=l,t[9]=m,t[10]=v,t[11]=0,t[12]=-(o*_+u*g+l*d),t[13]=-(c*_+s*g+m*d),t[14]=-(f*_+p*g+v*d),t[15]=1,t)}const m=document.getElementById("canvas"),f=m.getContext("webgl2");if(!f)throw new Error("WebGL2 not supported");const p=function(t,n,e){function i(n,e){const i=t.createShader(e);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(i);throw new Error(`Could not compile shader: ${n} \n\n${e}`)}return i}const r=i(n,t.VERTEX_SHADER),o=i(e,t.FRAGMENT_SHADER),a=t.createProgram();if(t.attachShader(a,r),t.attachShader(a,o),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS)){const n=t.getProgramInfoLog(a);throw new Error(`Could not link shader program. \n\n${n}`)}return a}(f,"#version 300 es\n\tin vec4 a_position;\n\tin vec3 a_color;\n\tin mat4 a_modelMatrix;\n\t\n\tuniform mat4 u_view;\n\tuniform mat4 u_projection;\n\tuniform vec3 u_lightPosition;\n\tuniform vec3 u_viewPosition;\n\n\tout vec3 v_normal;\n\tout vec3 v_color;\n\tout vec3 v_surfaceToLight;\n\tout vec3 v_surfaceToView;\n\n\tvoid main() {\n\t\tvec4 worldPosition = a_modelMatrix * a_position;\n\t\tgl_Position = u_projection * u_view * worldPosition;\n\t\tv_normal = mat3(a_modelMatrix) * a_position.xyz;\n\t\tv_color = a_color;\n\t\tv_surfaceToLight = u_lightPosition - worldPosition.xyz;\n\t\tv_surfaceToView = u_viewPosition - worldPosition.xyz;\n\t}\n","#version 300 es\n\tprecision highp float;\n\t\n\tin vec3 v_normal;\n\tin vec3 v_color;\n\tin vec3 v_surfaceToLight;\n\tin vec3 v_surfaceToView;\n\t\n\tuniform vec3 u_lightColor;\n\tuniform vec3 u_ambientLight;\n\tuniform float u_specular_power;\n\tuniform vec3 u_specularColor;\n\n\tout vec4 outColor;\n\n\tvoid main() {\n\t\tvec3 normal = normalize(v_normal);\n\t\tvec3 surfaceToLightDirection = normalize(v_surfaceToLight);\n\t\tvec3 lightIntensity = \n\t\t\t\n\t\t\t// Diffuse lighting\n\t\t\tu_lightColor * v_color * max(dot(normal, surfaceToLightDirection), 0.0) \n\t\t\t\n\t\t\t// Specular lighting\n\t\t\t+ u_specularColor * pow(\n\t\t\t\tmax(\n\t\t\t\t\tdot(\n\t\t\t\t\t\treflect(-surfaceToLightDirection, normal),\n\t\t\t\t\t\tnormalize(v_surfaceToView)\n\t\t\t\t\t),\n\t\t\t\t\t0.0\n\t\t\t\t),\n\t\t\t\tu_specular_power\n\t\t\t);\n\n\t\toutColor = vec4(lightIntensity + u_ambientLight * v_color, 1.0);\n\t}\n"),v=function(t,n,e){const i={};for(let r=0;r<e.length;r++)if(i[e[r]]=t.getAttribLocation(n,e[r]),-1===i[e[r]])throw new Error(`Could not get attribute location for ${e[r]}`);return i}(f,p,["a_position","a_color","a_modelMatrix"]),h=function(t,n,e){const i={};for(let r=0;r<e.length;r++)if(i[e[r]]=t.getUniformLocation(n,e[r]),-1===i[e[r]])throw new Error(`Could not get uniform location for ${e[r]}`);return i}(f,p,["u_view","u_projection","u_lightPosition","u_lightColor","u_viewPosition","u_ambientLight","u_specular_power","u_specularColor"]),_=f.createVertexArray();f.bindVertexArray(_),t(f,new Float32Array([-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1]),f.ARRAY_BUFFER,f.STATIC_DRAW),n(f,v.a_position,{size:3,type:f.FLOAT,normalize:!1,stride:0,offset:0}),t(f,new Uint16Array([0,1,2,2,3,0,1,5,6,6,2,1,5,4,7,7,6,5,4,0,3,3,7,4,3,2,6,6,7,3,4,5,1,1,0,4]),f.ELEMENT_ARRAY_BUFFER,f.STATIC_DRAW);const g=new Float32Array(96),d=[];for(let t=0;t<6;++t){const n=16*t*4,e=16;d.push(new Float32Array(g.buffer,n,e))}const w=t(f,g,f.ARRAY_BUFFER,f.DYNAMIC_DRAW);for(let t=0;t<6;t++){const n=v.a_modelMatrix+t;f.enableVertexAttribArray(n);const e=16*t;f.vertexAttribPointer(n,4,f.FLOAT,!1,64,e),f.vertexAttribDivisor(n,1)}t(f,new Float32Array([1,0,0,0,1,0,0,0,1,1,1,0,0,1,1,1,0,1]),f.ARRAY_BUFFER,f.STATIC_DRAW),n(f,v.a_color,{size:3,type:f.FLOAT,normalize:!1,stride:0,offset:0}),f.vertexAttribDivisor(v.a_color,1),window.addEventListener("resize",(()=>{m.width=window.innerWidth,m.height=window.innerHeight,f.viewport(0,0,m.width,m.height)}));const x=document.getElementById("toggleOverlay"),y=document.getElementById("overlay"),A=document.getElementById("controls"),E=document.getElementById("toggleControls");var b,C;b=A,C="flex",E.addEventListener("click",(function(){"none"===b.style.display?b.style.display=C:b.style.display="none"})),x.addEventListener("click",(()=>{"flex"===y.style.display?(y.style.display="none",x.textContent="<<",E.style.display="block"):(y.style.display="flex",x.textContent=">>",E.style.display="none",A.style.display="none")}));let T=0,L=.001,M=2*Math.PI,F=L*M,P=[.1,.1,.1],R=[0,0,6],S=[1,1,1],I=32,B=[1,1,1],D=[0,0,6],U=[0,0,0],z=s(o(),D,U,[0,1,0]),k=50*Math.PI/180,V=m.width/m.height,j=.1,W=10,Y=c(o(),k,V,j,W);e(A,"Tick rate","range",{min:0,max:.01,step:1e-4,init:L},(t=>{L=t,F=L*M})),e(A,"View X","range",{min:-10,max:10,step:.1,init:0},(t=>{D[0]=t,f.uniform3fv(h.u_viewPosition,D),z=s(o(),D,U,[0,1,0]),f.uniformMatrix4fv(h.u_view,!1,z)})),e(A,"View Y","range",{min:-10,max:10,step:.1,init:0},(t=>{D[1]=t,f.uniform3fv(h.u_viewPosition,D),z=s(o(),D,U,[0,1,0]),f.uniformMatrix4fv(h.u_view,!1,z)})),e(A,"View Z","range",{min:-10,max:10,step:.1,init:6},(t=>{D[2]=t,f.uniform3fv(h.u_viewPosition,D),z=s(o(),D,U,[0,1,0]),f.uniformMatrix4fv(h.u_view,!1,z)})),e(A,"Target X","range",{min:-10,max:10,step:.1,init:0},(t=>{U[0]=t,z=s(o(),D,U,[0,1,0]),f.uniformMatrix4fv(h.u_view,!1,z)})),e(A,"Target Y","range",{min:-10,max:10,step:.1,init:0},(t=>{U[1]=t,z=s(o(),D,U,[0,1,0]),f.uniformMatrix4fv(h.u_view,!1,z)})),e(A,"Target Z","range",{min:-10,max:10,step:.1,init:0},(t=>{U[2]=t,z=s(o(),D,U,[0,1,0]),f.uniformMatrix4fv(h.u_view,!1,z)})),e(A,"FOV","range",{min:0,max:180,step:1,init:50},(t=>{k=t*Math.PI/180,Y=c(o(),k,V,j,W),f.uniformMatrix4fv(h.u_projection,!1,Y)})),e(A,"Aspect","range",{min:0,max:10,step:.1,init:V},(t=>{V=t,Y=c(o(),k,V,j,W),f.uniformMatrix4fv(h.u_projection,!1,Y)})),e(A,"Near plane","range",{min:.1,max:10,step:.1,init:.1},(t=>{j=t,Y=c(o(),k,V,j,W),f.uniformMatrix4fv(h.u_projection,!1,Y)})),e(A,"Far plane","range",{min:.2,max:20,step:.1,init:10},(t=>{W=t,Y=c(o(),k,V,j,W),f.uniformMatrix4fv(h.u_projection,!1,Y)})),e(A,"Light X","range",{min:-10,max:10,step:.1,init:0},(t=>{R[0]=t,f.uniform3fv(h.u_lightPosition,R)})),e(A,"Light Y","range",{min:-10,max:10,step:.1,init:0},(t=>{R[1]=t,f.uniform3fv(h.u_lightPosition,R)})),e(A,"Light Z","range",{min:-10,max:10,step:.1,init:6},(t=>{R[2]=t,f.uniform3fv(h.u_lightPosition,R)})),e(A,"Light R","range",{min:0,max:1,step:.01,init:1},(t=>{S[0]=t,f.uniform3fv(h.u_lightColor,S)})),e(A,"Light G","range",{min:0,max:1,step:.01,init:1},(t=>{S[1]=t,f.uniform3fv(h.u_lightColor,S)})),e(A,"Light B","range",{min:0,max:1,step:.01,init:1},(t=>{S[2]=t,f.uniform3fv(h.u_lightColor,S)})),e(A,"Ambient R","range",{min:0,max:1,step:.01,init:.1},(t=>{P[0]=t,f.uniform3fv(h.u_ambientLight,P)})),e(A,"Ambient G","range",{min:0,max:1,step:.01,init:.1},(t=>{P[1]=t,f.uniform3fv(h.u_ambientLight,P)})),e(A,"Ambient B","range",{min:0,max:1,step:.01,init:.1},(t=>{P[2]=t,f.uniform3fv(h.u_ambientLight,P)})),e(A,"Specular power","range",{min:0,max:64,step:.5,init:32},(t=>{I=t,f.uniform1f(h.u_specular_power,I)})),e(A,"Specular R","range",{min:0,max:1,step:.01,init:1},(t=>{B[0]=t,f.uniform3fv(h.u_specularColor,B)})),e(A,"Specular G","range",{min:0,max:1,step:.01,init:1},(t=>{B[1]=t,f.uniform3fv(h.u_specularColor,B)})),e(A,"Specular B","range",{min:0,max:1,step:.01,init:1},(t=>{B[2]=t,f.uniform3fv(h.u_specularColor,B)})),e(A,"Depth Test","checkbox",{init:!0},(t=>{t?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST)})),e(A,"Cull Face","checkbox",{init:!0},(t=>{t?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE)})),e(A,"Cull CW","checkbox",{init:!0},(t=>{t?f.frontFace(f.CW):f.frontFace(f.CCW)})),f.useProgram(p),f.enable(f.DEPTH_TEST),f.enable(f.CULL_FACE),f.frontFace(f.CW),f.uniformMatrix4fv(h.u_view,!1,z),f.uniform3fv(h.u_lightPosition,R),f.uniform3fv(h.u_lightColor,S),f.uniform3fv(h.u_viewPosition,D),f.uniform3fv(h.u_ambientLight,P),f.uniform1f(h.u_specular_power,I),f.uniform3fv(h.u_specularColor,B),f.uniformMatrix4fv(h.u_projection,!1,Y);for(let t=0;t<3;t++)a(d[t]),u(d[t],d[t],[4*t-4,1.5,0]);for(let t=3;t<6;t++)a(d[t]),u(d[t],d[t],[t%3*4-4,-1.5,0]);window.dispatchEvent(new Event("resize")),function t(){f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT),T=(T+L)%M;for(let t=0;t<3;t++)l(d[t],d[t],Math.sin(t+T)*F,[1,-.5,-1]);for(let t=3;t<6;t++)l(d[t],d[t],Math.sin(t-T)*F,[1,-.5,-1]);f.bindBuffer(f.ARRAY_BUFFER,w),f.bufferSubData(f.ARRAY_BUFFER,0,g),f.drawElementsInstanced(f.TRIANGLES,36,f.UNSIGNED_SHORT,0,6),requestAnimationFrame(t)}()})(),t.p,t.p,t.p,t.p,t.p,t.p})();